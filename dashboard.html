<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delta 6 - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        .card {
            background-color: #1e293b;
            border-radius: 1.5rem;
            padding: 2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2), 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        #header {
            background-color: #1e293b;
            padding: 1rem;
            border-bottom: 2px solid #334155;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 min-h-screen flex flex-col">

    <!-- Header -->
    <header id="header" class="flex items-center justify-between px-8 py-4 sticky top-0 z-10">
        <div class="flex items-center">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSPUjmt_X_yRY2FhAHToeCDmsn-YbAchcD288349bDVnIk9B9tz8qgcmJg&s" alt="Delta 6 Logo" class="w-12 h-12 mr-4">
            <h1 class="text-2xl font-bold">Welcome, admin</h1>
        </div>
        <button id="logout-button" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-xl transition-colors duration-200">
            Logout
        </button>
    </header>

    <!-- Main Content & Sidebar Container -->
    <div class="container mx-auto p-4 flex-grow flex flex-col lg:flex-row gap-8">
        <!-- Sidebar Navigation -->
        <aside class="lg:w-1/4">
            <div class="card p-6 flex flex-col gap-4 sticky top-20">
                <h2 class="text-xl font-bold mb-2">Topics</h2>
                <div id="nav-links" class="flex flex-col gap-2">
                    <button data-path="home" class="nav-button bg-sky-600 hover:bg-sky-700 text-white font-semibold py-2 px-4 rounded-xl transition-colors duration-200">
                        Home
                    </button>
                    <button data-path="sql-injection" class="nav-button bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors duration-200">
                        SQL Injection
                    </button>
                    <button data-path="xss" class="nav-button bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors duration-200">
                        XSS
                    </button>
                    <button data-path="open-redirect" class="nav-button bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors duration-200">
                        Open Redirect
                    </button>
                    <button data-path="subdomain-finder" class="nav-button bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors duration-200">
                        Subdomain Finder
                    </button>
                    <button data-path="assets-link-finder" class="nav-button bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors duration-200">
                        Assets Link Finder
                    </button>
                    <button data-path="ssti" class="nav-button bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors duration-200">
                        SSTI
                    </button>
                    <button data-path="csti" class="nav-button bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-xl transition-colors duration-200">
                        CSTI
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="lg:w-3/4 flex-grow flex flex-col">
            <div id="content" class="card flex-grow flex flex-col">
                <!-- Content will be injected here by JavaScript -->
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Check for login state
            const isLoggedIn = localStorage.getItem('loggedIn') === 'true';
            if (!isLoggedIn) {
                window.location.href = 'index.html';
                return;
            }

            const attacks = {
                'home': {
                    title: 'Welcome to the Security Guide',
                    description: 'This is an educational tool for learning about common web security vulnerabilities and how to prevent them. This application does not perform any real-world actions.',
                    content: `
                        <p class="text-gray-400 mb-4">
                            Select a topic from the navigation menu on the left to learn about its technical details, impact, and best practices for prevention.
                        </p>
                        <p class="text-gray-400">
                            Understanding these concepts from a defensive perspective is the first step towards building secure and robust applications.
                        </p>
                        <div class="mt-8 flex justify-center">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSPUjmt_X_yRY2FhAHToeCDmsn-YbAchcD288349bDVnIk9B9tz8qgcmJg&s" alt="Delta 6 Logo" class="w-24 h-24">
                        </div>
                    `,
                },
                'sql-injection': {
                    title: 'SQL Injection (SQLi)',
                    description: 'A code injection technique used to attack data-driven applications, in which malicious SQL statements are inserted into an entry field for execution. An attacker can use this to bypass authentication, retrieve data, or even modify the database.',
                    prevention: `
                        <h4 class="text-xl font-bold mt-6 mb-2 text-white">Prevention</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Use <b>Prepared Statements</b> with parameterized queries. This separates the SQL command from the user-provided data.</li>
                            <li>Use <b>Stored Procedures</b>.</li>
                            <li>Validate and sanitize all user input.</li>
                            <li>Minimize database permissions for web applications.</li>
                        </ul>
                    `,
                },
                'xss': {
                    title: 'Cross-Site Scripting (XSS)',
                    description: 'A vulnerability that allows an attacker to inject malicious client-side scripts into web pages viewed by other users. This can be used to steal user session cookies, redirect users, or perform other malicious actions.',
                    prevention: `
                        <h4 class="text-xl font-bold mt-6 mb-2 text-white">Prevention</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li><b>Sanitize and escape</b> all untrusted data before inserting it into the HTML.</li>
                            <li>Set the <b>HttpOnly</b> flag on session cookies to prevent them from being accessed by client-side scripts.</li>
                            <li>Implement a strong <b>Content Security Policy (CSP)</b> to control which scripts can execute.</li>
                            <li>Use an encoding library to handle data contextually.</li>
                        </ul>
                    `,
                },
                'open-redirect': {
                    title: 'Open Redirect',
                    description: 'A vulnerability where a web application allows an attacker to manipulate parameters and redirect users to a malicious website. This is often used in phishing campaigns.',
                    prevention: `
                        <h4 class="text-xl font-bold mt-6 mb-2 text-white">Prevention</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Do not use untrusted input to build redirection URLs.</li>
                            <li>Use a whitelist of allowed domains or paths for all redirects.</li>
                            <li>Inform the user before redirecting them to an external site.</li>
                        </ul>
                    `,
                },
                'subdomain-finder': {
                    title: 'Subdomain Finder',
                    description: 'A tool used in security to discover all active subdomains associated with a main domain. This is a reconnaissance technique used to map out a target\'s attack surface and find other entry points.',
                    prevention: `
                        <h4 class="text-xl font-bold mt-6 mb-2 text-white">Prevention</h4>
                        <p class="text-gray-400 mt-2">
                            While finding subdomains is not a vulnerability in itself, it is a critical step in reconnaissance. To reduce your attack surface, ensure all unused subdomains are properly decommissioned. Always secure all subdomains with the same rigor as your main domain.
                        </p>
                    `,
                },
                'assets-link-finder': {
                    title: 'Assets Link Finder',
                    description: 'A tool for discovering links to assets (e.g., JavaScript files, CSS files, images) on a website. Attackers use this to identify potential vulnerabilities in older scripts or to find hidden assets not visible to the user.',
                    prevention: `
                        <h4 class="text-xl font-bold mt-6 mb-2 text-white">Prevention</h4>
                        <p class="text-gray-400 mt-2">
                            This is another reconnaissance technique. To mitigate risks, ensure that all assets are up-to-date and that there are no sensitive files or information accessible through direct links. Regularly audit your publicly available files.
                        </p>
                    `,
                },
                'ssti': {
                    title: 'Server-Side Template Injection (SSTI)',
                    description: 'A vulnerability that occurs when user input is insecurely embedded into a server-side template, allowing an attacker to inject and execute arbitrary code on the server.',
                    prevention: `
                        <h4 class="text-xl font-bold mt-6 mb-2 text-white">Prevention</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Avoid using templates for untrusted user input.</li>
                            <li>Use a template engine with a sandbox or strict mode to limit the functions and objects that can be accessed.</li>
                            <li>Sanitize user input before passing it to the template.</li>
                        </ul>
                        <div class="mt-8 flex justify-center">
                            <img src="https://placehold.co/400x200/1e293b/a0a0a0?text=SSTI+Example+Diagram" class="rounded-lg shadow-md" alt="SSTI Example Diagram"/>
                        </div>
                    `,
                },
                'csti': {
                    title: 'Client-Side Template Injection (CSTI)',
                    description: 'Similar to SSTI, but the injection and execution of code happens in the browser. This occurs when an attacker can inject a malicious payload into a client-side template, potentially leading to XSS.',
                    prevention: `
                        <h4 class="text-xl font-bold mt-6 mb-2 text-white">Prevention</h4>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Sanitize all user-provided data before it is rendered by the client-side template.</li>
                            <li>Avoid using client-side template engines for rendering data directly from user input.</li>
                            <li>Implement a strong Content Security Policy (CSP).</li>
                        </ul>
                    `,
                },
            };

            function renderContent(path) {
                const contentDiv = document.getElementById('content');
                const attack = attacks[path];

                document.querySelectorAll('.nav-button').forEach(btn => {
                    btn.classList.remove('bg-sky-600', 'hover:bg-sky-700');
                    btn.classList.add('bg-gray-700', 'hover:bg-gray-600');
                });

                const activeBtn = document.querySelector(`[data-path="${path}"]`);
                if (activeBtn) {
                    activeBtn.classList.add('bg-sky-600', 'hover:bg-sky-700');
                    activeBtn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
                }

                if (attack) {
                    contentDiv.innerHTML = `
                        <div class="flex-grow flex flex-col">
                            <h2 class="text-3xl font-bold text-white mb-4">${attack.title}</h2>
                            <p class="text-gray-400 mb-6">${attack.description}</p>
                            <div class="flex-grow">
                                ${attack.content || ''}
                                ${attack.prevention || ''}
                            </div>
                        </div>
                    `;
                } else {
                    renderContent('home');
                }
            }

            document.getElementById('logout-button').addEventListener('click', () => {
                localStorage.removeItem('loggedIn');
                window.location.href = 'index.html';
            });

            document.getElementById('nav-links').addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    const path = e.target.dataset.path;
                    renderContent(path);
                }
            });
            
            // Render the initial content
            renderContent('home');
        });
    </script>
</body>
</html>
